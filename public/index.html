<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcome to Firebase Hosting</title>

  <!-- update the version number as needed -->
  <script defer src="/__/firebase/5.4.0/firebase-app.js"></script>
  <!-- include only the Firebase features as you need -->
  <script defer src="/__/firebase/5.4.0/firebase-auth.js"></script>
  <script defer src="/__/firebase/5.4.0/firebase-database.js"></script>
  <script defer src="/__/firebase/5.4.0/firebase-messaging.js"></script>
  <script defer src="/__/firebase/5.4.0/firebase-storage.js"></script>
  <!-- initialize the SDK after all desired features are loaded -->
  <script defer src="/__/firebase/init.js"></script>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic|Material+Icons">
  <link rel="stylesheet" href="https://unpkg.com/vue-material@beta/dist/vue-material.min.css">
  <link rel="stylesheet" href="https://unpkg.com/vue-material@beta/dist/theme/default.css">
</head>

<body>
  <div id="app">
    <p>MAIL:<input type="text" v-model="email"></p>
    <p>PASS:<input type="text" v-model="password"></p>
    <p><button @click="login">login</button></p>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-material@beta"></script>
  <script>
    const waitAuthStateChanged = async () => {
      return new Promise((resolve, reject) => {
        firebase.auth().onAuthStateChanged(user => {
          resolve(user)
        })
      })
    }
  </script>
  <script>
    Vue.use(VueMaterial.default)

    const vm = new Vue({
      el: '#app',
      data: {
        email: '',
        password: ''
      },
      methods: {
        async login () {
          try {
            await firebase.auth().createUserWithEmailAndPassword(
              this.email,
              this.password
            )
          } catch (error) {
            if (error.code !== 'auth/email-already-in-use') {
              console.error('signup error', error)
              return
            }
          }
          try {
            await firebase.auth().signInWithEmailAndPassword(
              this.email,
              this.password
            )
          } catch (error) {
            console.error('signin error', error)
            return
          }
          
        }
      }
    })

    // main function zone
    const main = async () => {
    }

    document.addEventListener('DOMContentLoaded', main)
  </script>
</body>

</html>